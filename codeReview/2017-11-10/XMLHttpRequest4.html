<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ajax状态</title>
    <script type="text/javascript">
    window.onload = function() {
      let oBtn = document.getElementById('btn1');

      oBtn.onclick = function () {
        //1. 创建对象
        let xhr = new XMLHttpRequest();
        console.log(xhr.readyState); //0

        //2. 连接
        xhr.open('GET', 'data/1.xml', true);
        console.log(xhr.readyState); //1
        //3.发送数据
        xhr.send();
        console.log(xhr.readyState);  //1

        //4.接收数据
        xhr.onreadystatechange = function() {
          if (xhr.readyState == 4) {
            if (xhr.status >=200 && xhr.status <300
              || xhr.status == 304) {

                console.log(xhr);
                // console.log(eval('(' + xhr.responseText + ')'));
                let oDoc = xhr.responseXML;
                console.log(oDoc.getElementsByTagName('person'));

            } else {
              alert('failed!');
            }
          }
        }
      }
    }

    </script>
  </head>
  <body>
    <input type="button" name="" value="submit" id='btn1'/>
  </body>

</html>
