<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ajax状态</title>
    <script type="text/javascript">
    window.onload = function() {
      let oBtn = document.getElementById('btn1');

      oBtn.onclick = function () {
        //1. 创建对象
        let xhr = new XMLHttpRequest();
        console.log(xhr.readyState); //0

        //2. 连接
        xhr.open('GET', '1.js', true);
        console.log(xhr.readyState); //1
        //3.发送数据
        xhr.send();
        console.log(xhr.readyState);  //1

        //4.接收数据
        xhr.onreadystatechange = function() {
          if (xhr.readyState == 2) {
            alert('刚刚发送完成');
          }
          else if (xhr.readyState == 3) {
            alert('header 接收完成');
          } else if (xhr.readyState == 4) {
            alert('body 接收完成');
            if (xhr.status >=200 && xhr.status <300
              || xhr.status == 304) {
                alert("success");
            } else {
              alert('failed!');
            }
          }
        }
      }
    }

    </script>
  </head>
  <body>
    <input type="button" name="" value="submit" id='btn1'/>
  </body>

</html>
